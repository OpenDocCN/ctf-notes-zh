# 2024最新版网络安全秋招面试短期突击面试题【100道】我会出手带你一周上岸！（网络安全、渗透测试、web安全、安全运营、内网安全、等保测评、CTF等） - P41：Kerberos协议的认证流程 - CTF入门教学 - BV1bcsTeXEwR

大家好，我是黑客大白。那接下来呢我们一起来看一道面试题。这道面试题的话呢，出现在某公司招聘红队的这个面试现场。面试官问这个cober尔协议的这个认证流程是什么？好，那么我们拿到这样一道面试题的时候呢。

我们首先要搞清楚面试官针对于这个面试者他具体的考察的知识点是什么。其实这一类的题目的话呢，都是面试官对于呃这个面试者内网计算机的相关的这个内网域的知识的一个考察。

内网域呢是windows计算机系统的这个系统模块，它常常呢运用在大型的公司或者是大型网络计算机的这个架构中会运用的场景比较多。比如说这这个呃类似于国家电网或者是京东、阿里淘宝等等啊。

这种互联网巨头的这种公司，他们运用到内网域的呃，这个概念就相对来说比较多。因此这类的知识点呢常常会作为这个红对渗透工程师的。呃，相关的知识点来作为考察。好，那回答这个问题之前呢。

我们首先要搞清楚什么是内网域。内网域呢是windows系统的一个组织形式。那它存在的功能和作用呢，实际上就是实现网络资源的统一管理和集中身份验证。也就是说能够让呃整个内网环境更加的安全。

然后管理起来更加的方便。那么运用生活化的这个案例来比较的话，大家可以把这个内网域呢看成一个小区。那么这个呃小区里面呢是存在很多的这个住宅楼，还有一些公共设施，包括这个小区呢也会聘请这个物业，对吧？

那么在内网域里面呢，实际上它也有类似于相关的这些架构。比如说内网域中存在一个预控制器。我们简称它为DC。这个预控制器呢，它是负责存储管理域中的一些数据库啊，或者是进行身份验证和资源访问的这个控制等等啊。

它是用来做这些的。那么这个预控制器实际上就相当于这个小区里面的这个物业。小区业主想要回家，想要进到小区，那么他就会呃给这个业主呢提供这个身份认证，避免一些这个不法分子啊，或者是其他的人进到这个小区来。

然后就是活动目录。活动目录呢实际上是windows系统网络环境中提供目录服务的一个组件。它存储了域中的所有对象，比如说用户、计算机组啊等等的一些信息。它实际上呢就可以看成这个小区里面的一些公共设施。

比如说呃一些提供给这个小区里面的老年人健身的一个呃一些器材呀，或者是这个提供给小孩子玩的一些游乐设施。比如说一个呃秋千、滑滑梯等等啊，这些公共设施。这个就叫做域类的活动目录。那么信任关系是什么呢？

其实就是连接在玉和玉之间的一个桥梁，它允许不同的域之间用户和资源进行交互和管理。那么我们还是以这个小区为例子，整个小区的话呢，它不止一栋住宅楼，它还它分为啊一栋、二栋3栋，对不对？那么这个小区的业主呢？

呃，如他用自己的这个门禁卡，他只能刷他自己的这个小区大门和这个他自己住的那栋楼的这个单元门。那么他如果说作为一号这个楼主的话。呃，这个一号楼的这个住户的话，想要去2号楼，他去刷卡，肯定是刷不开的。

对不对？那么在这种情况下呢，如果说我们2号楼里面哎住了一个这个亲朋好友，我们想要去他家去拜访一下，或者是去他家呃做客。那这个时候想这个一号楼的这个业主呢，就要向这个预控制器呢申请一个临时访问的一个权限。

那这个时候他就可以用自己的门禁卡，临时的进入到2号楼啊，去他亲朋好友家去串门。😊，大家可以这样去理解啊，那么运用这样一个内网域环境呢，实际上就能够确保了整个小区的呃这样一个统一管理是吧？呃。

就是让这个小区的业主们。更加的。就是住在里面会更加的安全，然后确保了这个小区的安全性和秩序。好，我们搞清楚这个内网域它是一个什么样的概念之后，接下来我们就要学习这个cobar认证协议的一个基础概念。

这个co贝协议呢，实际上就是相当于小区里面的这个物业呢，针对于这个业主的一个身份的一个认证。那么在这个过程中，如果说小区业主想要从这个小区门外进到这个小区里面。

实际上他就会要经过这个cober的认证协议。也就是说，我作为一个其他用户想要进入到内网起内网里面，我就要经过这样一个协议。首先的话大家要搞清楚这个科协议认证的一个基础概念啊。首先第一个就是票据。

票据的话呢就是网络对象互相访问的一个凭证。那就相当于这个呃物业给小区呢，每个业主发放了一个门禁卡。那么这个小区业主就可以凭借这个门禁卡呢进入这个小区。好。

ADAD的话就是存储域中所有用户的用户名和对应的这个相应的NTML哈希。那么我们可以把它看成域类的这个sm数据库。也就是说这个AD呢它是保存了所有在这个内网域中所有用户的。身份信息。啊。

那就可以看成这个小区里面的这个门禁系统。这个系统里面保存了所有小区业主的这个身份信息。对不对？那小区业主拿着这个门禁卡去刷卡的过程中，实际上就相当于在这个AD里面。去呃匹配自己的这个身份信息。

然后确保这个门禁卡能够刷得开。好，下一个概念叫做KDS，这个就叫做密钥分发中心。它是负责管理这个相应的票据，认证票据、分发票据的。那么大家把它生活化的理念来看的话，就相当于这个物业呢里面呢。

有一个人他是负责专门管理这个门禁卡的，对不对啊，每当有一个新的这个小区业主进入到这个小区里面之后。😊，那么这个呃负责管理门禁卡的这个人呢，就会制作一张门禁卡，然后给到这个小区业主。然后这个小区业主呢。

他就会。呃，凭借这张门禁卡呢进出这个小区。AS呢是身份认证服务。也就是说。就是为这个客户端的生成TGT服务的一个生成TGT的一个服务。它是用来验证对客户端的一个身份认证。也就是说呃。

小区业主在刷这个卡的时候，他实际上他也就是他拿着他自己的这个身份信息呢去。😊，去到这个系统里面匹配是否为这个小区业主啊，就是这样一个过程。然后TGS呢是票据授予服务，这是什么意思呢？

实际上就是当这个小区的业主呢，如果说想要访问想要去这个小区里面的一些公共区域的时候，比如说这个小区里面呢存在一个呃图书室。这个图书室的话呢，只有只允许小区业主才能去访问。

那么这个其他人想要进去这个图书室的话，他就要验证身份，然后再能够进入到这个图书室里面。因此他这个就是小区业主想要去访问这个图书室的话，想要进到这个图书室里面去看书的话呢，那么首先他要进行这个身份验证。

身份验证通过之后，他才能够去访问，就是进入到这样一个图书室。TGT呢实际上就是呃为这个票据生成票据的一个服务啊，它这个就是一个身份认证的一个服务啊。它就是如果是使用它生成出来的票据的话。

就是一个黄金票据，它是用于身份认证的。那么关于这个身份认证的票据呢，它呃是存储在内存里面，它是有有效期的。也就是说验证这个身份的，它不是说永久有效的。你这个身份验证通过的话。

它是有10个小时的一个有效期。好，我们知道我们知道这个cober协议它的一个相应的基础概念之后，我们接下来来呃就是具体回答一下这样一个问题。那么这个cober协议呢是一个网络认证协议。

其设计的目标是通过密钥系统为客户端和服务端应用程序呢提供强大的一个认证服务。那我们看这样一段话的话，实际上它是非常的官方。我们就用呃右边这样一张图示呢来进行讲解。首先呢如果说作为一个客户端。

我们想要访问这个服务端中的某一个数据的时候，或者是某一项服务的时候呢，它不是直接向服务端发送请求的。在这个co协议中呢，它是首先向这个KDKDC去验证自己的身份。也就是这个客户端呢会把自己的账号和密码。

它的身份凭据信息呢发送给KDC让他去作为验证。😊，然后KDC呢会去呃这个相应的系统里面查找这个客户的相应的信息。如果说认证通过，就会返回给这个客户端一个票据。那么这样一个票据呢叫做TGT。然后第二次呢。

这个呃客户端呢会再次向这个KDC请求发送请求是吧？我要访问这个服务端中的某一个服务。然后这个时候客户端呢会带着这个TGT。继续向KDC发送请求，希望获取访问这个服务端的某个权限。

那KDC又得到这个消息了，这个时候他就会通过前面发放的这个TGT这个票据，然后判断出这个客户端拥有访问这个呃服务的一个权限。所以呢访问通这个申请通过之后，又会给这个客户端。发放一张票据。那这张票据呢。

我们叫它TGS。好，在这个客户端拿到这个TGS的这样一个票据之后，于是他就会直接向这个服务端呢发送这个请求。那么服务端验证这个客户端具备这个权限之后，才会给他相应的这个数据返回回来。因此。

这个实际上就是一个cober协议的一个认证流程。那为了方便大家更好的理解呢，我们还是以这个小区这个生活化的例子来给大家举例。比如说某个人想要去访问小区中这个图书室里面的，就是他想要去图书室里面看一本书。

那么这本书呢，它是放在小区的这个图书馆里面的。因此，这个人如果说想要进入这个图书馆的话，想要看到这本书。首先第一步他要进入小区，于是他会向这个呃小区的门禁呢提出申请，也就是刷他的这个门禁卡。

然后这个门禁卡呢在验证了这个小区的这个呃业主的这个身份之后，会给他开门，然后这个人就进入到小区了。进了小区之后呃，由于这个物业呢害怕这个图书馆里面的书呢丢失。

于是又安安排了一个人在这个图书馆门口呢再次进行一个呃进行一个身份验证。也就是说，这个图书馆它实际上只允许小区里面的。业主才能够访问。然后这个小区呢啊这个人呢。

他又会向这个相应的KDS也就是这个呃物业的这个系统呢再次验证自己的这个权限。那这个呃业主系统呢？就是核查到这个人拥有这个小区，就是这个图书馆的访问权限之后，于是他才会让他进门。进到这个图书馆以后。

这个人才会去最终呢到那个书架上去找到这本书，然后去进行读取。这个实际上就是一个co二协议的一个生活化的一个呃案例。希望大家能够更好的去理解。那么关于更多的这个面试题呢，呃大白这边也进行了这个归纳整理。

欢迎有需要的小伙伴到评论区留言，我们一起学习进步，谢谢大家。😊。