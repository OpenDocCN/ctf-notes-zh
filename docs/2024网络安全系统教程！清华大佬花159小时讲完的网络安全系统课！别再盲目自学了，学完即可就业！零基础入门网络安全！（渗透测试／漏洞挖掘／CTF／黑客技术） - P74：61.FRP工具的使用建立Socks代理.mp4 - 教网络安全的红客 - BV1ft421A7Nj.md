# 2024网络安全系统教程！清华大佬花159小时讲完的网络安全系统课！别再盲目自学了，学完即可就业！零基础入门网络安全！（渗透测试／漏洞挖掘／CTF／黑客技术） - P74：61.FRP工具的使用建立Socks代理.mp4 - 教网络安全的红客 - BV1ft421A7Nj

我们正在开始我们今天的一个课程内容。我们今天的话主要给大家介绍那个ss的一个代理132。我们上节的话是呃给大家通过就是说。



![](img/d924d878fa9d64d263084d2110a72810_1.png)

通过这样子的一个靶场，就是这样子的一个商层网络靶场，让大家就是呃。

![](img/d924d878fa9d64d263084d2110a72810_3.png)

比较好的去理解这样子的一个ss代理的一个内网穿透，对吧？我们通过这样子的一个ss的一个代理来实现了多层网络的这样子的一个内网圈内网穿透。就呃我们要经行的这样子的一个ss通道来去进入到内网。

去访问内网的这样子的一些服务。然后我们本节的话呃给大家介绍的话就是这2块内容。第一块的话就是说代理的1个FRP。第二个的话就是EW。这两个这边的话是两个工具的一个使用。

其实他们的一个呃思路及原理的话都是类似的。主要的话主要的话就是让大家呃理解他的一个思路，以及他的一个基本的一个使用。呃，首先第一个的话就是FRPFRP这个工具的话，前面的话呃。

在第在第一部分的时候有给大家介绍，对吧？介绍那个说词代理的一个常用的一些工具。然后呃这边的话我们使用的一个场景的话，同样的是。



![](img/d924d878fa9d64d263084d2110a72810_5.png)

![](img/d924d878fa9d64d263084d2110a72810_6.png)

呃，这边的这个把机把机的这一个场景。然后这边的话我就不多说了啊。然，呃前面的这样子的一些步骤的话都是。呃，类似的这边的话，这些的话应该没有什么问题吧，大家。这边的这一些内容的话应该是没有问题吧。

就呃大家有自己去做吗？应该呃没有碰到这种问题吧啊吧，就比如说你去扫扫端口，扫不到对吧，这种应该没有问题吧。嗯，好的。啊呃，这些前面这一些部分的话，因为上节课已经讲过了，我就不多说了。

就因为呃为了让这一个流程就是完整一点，对吧？所以的话我同样的把上一节课的PPT的话也贴过贴出来了，就是呃就是你就算你没有呃，做或者说没有听上一节课的一个内容，对吧？你拿着我这个PPT。

你同样的可以照着这样子的一个步骤，对吧？这样子的一个流程，用这样子的一个代理方式来去进行一个操作。啊，我们直接的话跳过就是说前面已经讲过的，就给大家主要介绍嘛呃没有去讲到的这样子的一些东西。呃。

前面我们这边通过就得到了他的一个 share，对吧？通过这边的一个8年的一个P的一个程命令执行漏洞，得到了他的一个 share。得到这个b share之后的话，我们对它进行相应的一个主机信息收集。

然后的话发现了这样子的一个存活主机，对吧？然发现这个存货主机的话，因为我们当前的这样子的一个主机的话是我们呃。我们看这个话是我们这边拿到了这一台tt一的这个机器，对吧？就我们通过外网的这个web服务。

拿到了它的这样子的一个机器的一个work share。然后这个机器的话，它是呃在外网的，我们在我们在外面是能够去直接去访问到这个机器的对吧？

然后的话这个机器它同样的又存在有这样子的一个通向内网的一个网卡，这个网卡的话，是一个22点1已经知道能够去进入到22这一个网站，对吧？我们想要对22这个网站去做一个测试，那么我们就需要去访问。

或者说去找到22这拼的一个需要脚本，对吧？找到这样子的一个存活主机，我们知道这一个网站有一个存活主机。那么我们想要去对它做一个测试，对吧？但是的话在这边的话有一个问题。

就是说我这边得到这个work share，它的一个功能啊，或者说我们的一个操作的话是有限的对吧？我们想要去做更多的一个操作，对它继去进行一个呃端口扫描，对吧？

去进行一个服务的一个探测等等的这样子的一些操作的话，我们在这样子的一个web share下面去操作的话是呃比较麻烦的。呃，这边。是吧。去这样子操作的话是比较麻烦的。

所以的话我们通过这样子的一个建立这样子的一个收持的一个代理通道。把我们这边我们通过这边的这一个需是吧？把他的这样子的一个呃呃这一个网段，或者说把这边的这个机器的一个需。

我们把它通过s持的一个代理代理出来。然后我们通过这样子的尽力，这样通过这样子的一个说索代理通道来去访问这边啊，原本在外网访问不到的这样子的一个内网的1个2的2。2的这样子的一个网段，对吧？

这就是我们去建立这样子的收sp back通道的一个呃原因以及意义。然后呃在这边在前面的话是介绍的是直接用MSF对吧？我们MSF的话，它有集成了很多的这样子的一一些功能，就是比较简单，是吧？

我们直接去进行相应的一个配置，安装的一个流程去配就OK了。然呃。对了，就是上节关于上节课的那个MSF的这样子的一个说词代理，大家大家还有疑问吗？嗯。就是呃还有还有没理解的吗？哎呃，周末的话也有同学问我。

有有有同学问我这个，但是这个东西的话，我用发消息的这种方法去跟你沟通交流的话。讲不清楚，就是所以我建议你还是如果你没听懂的话，你先去看那个录播是吧？去看我那个在上课的时候讲的那个东西。

然后的话你自己再结合你自己去自己的一个操作来去理解，好吧。如果呃如果还有问题的话，这节课呃这节课如果后面有时间的话，再给大家去做一个介绍好吧，然后到时有问题的呃，直接提。好。

我们重新呃回到PPT在这边的话，我们所要去使用的就是这一个FIRP的这样子的一个工具。具体的一个步骤的话就是像这样子，我这边的话以截图的一个形式呃。给展示出来了。

首先的话我们需要有这样子的1个VPS就是说呃就是说我们要去做这样子的一个代理通道。其实上节课也讲对吧？我们想要去把这边的这样子的一个松索代理，把它呃代理到呃一个我们能够去访问到的一个地方。

也就是说我们在内网也能够去访问到的一个地方。那么我们就需要有一个公网的1个IP对吧？所以的话呃在这边你需要有一台这样子的1个VPS，也就是呃有一个这样子的一个公网IP。然呃，在VPS上面的话，我们。呃。

我这边打开我这边的。这边的1个UPS。呃，我这边的话已经就是呃下载好了。呃，这一个关于这个FRP的一个下载，应该不用那个吧。呃，在那个预习内容当中。



![](img/d924d878fa9d64d263084d2110a72810_8.png)

呃，这边。在这边的一个运行内容当中，然后在这边的话，他有就介绍这样子的FRP这个工具的一个详细的一个使用了。然后呃。



![](img/d924d878fa9d64d263084d2110a72810_10.png)

我们要去下载，就是说在这边的话，它是他的一个就是一个源码，对吧？然后我们。在这边要去下载，它已经去编译好的话，我们在这边在这边有一个release。

release的话就是已经就是已经编译好的这样子的一个版本。嗯。😊，然后在这边的话，我们可以找到这边最新的0。34。1这样子的一个版本，对吧？麦克用什么虚拟机比较好？m克的话呃。

我主要我没怎么去用过m克，麦克的话不是有一个那个。呃，用YY选吗？还是呃翻选还是什么来着，你百度一下吧，好吧。也是跟vivo是呃一样的，就是在m克下面去使用的一个虚拟机。

然后呃在这的话就有列出了这样子的一些版本嘛，对吧？像windows643386的，就32嘛，是吧？还有其他的一些像linux下面的。然后呃建议大家的话可以就是把像常用的这种linux对吧？

以及windows的这几个版本就下载下来嘛，对吧？然后我们直接就可以在要去用的时候就去用嘛。嗯。好，口在这边的话。我在这边的话就已经下载到这样子的1个VPS上面去了。然呃在这的话就有这样子的一些呃文件。

对吧？然后关于这个FRP的一个使用的话，其实也比较简单，就是。嗯。就是使用的话就是这样子，它它的一个使用的话就是它有这样子的一个。首先它是有一个这样子的1个FRPC。



![](img/d924d878fa9d64d263084d2110a72810_12.png)

FRPC的话就是这个FRP的一个客户端。然后FRTF呃，FRP的话就是它的一个服务端。

![](img/d924d878fa9d64d263084d2110a72810_14.png)

![](img/d924d878fa9d64d263084d2110a72810_15.png)

那你。这个是客户端，这个是服务端。然后的话他要去进行一个呃操作，以经呃操作，或者是说去进进进行一个奢持代理通道的一个连接的话，它我们需要去相有相应的一个配置。然后它的一个配置的话。

它是通过这样子的一个配置文件的一个形式去进行一个呃存储的。

![](img/d924d878fa9d64d263084d2110a72810_17.png)

![](img/d924d878fa9d64d263084d2110a72810_18.png)

在我们呃我这边比如说这个FRPC。点下。

![](img/d924d878fa9d64d263084d2110a72810_20.png)

Yeah。

![](img/d924d878fa9d64d263084d2110a72810_22.png)

就是在这边的话，就是它的一个配置文件。然后像这边这边呃中括号包裹的这一个的话，这一块的话就是它的一个相当于是一个注释一样的一个东西。然后呃在。一般的话就是在这边的话，我们可以就是标明我这边的这个配置。

它是主要是重啊，用来干嘛的对吧？然后下面的话这里的话就是我们的一些配置的一个选项。关于这些关于这些配置的选项的话，大家也不用。呃，大家大概记一下，就是常用的就可以了。就呃常用的话。

我们我在这节课的话都会给大家去讲到了，就是然后在这的话我就不单独的去讲。然后呃我在进行操作的时候，再分别给大家去做一个介绍，好吧。呃，首先的话我们需要去建立这样子的一个ss的一个服务。

然后我们的一个s的一个服务的话，就是通过这样子的1个FRD。

![](img/d924d878fa9d64d263084d2110a72810_24.png)

FPS这样子的一个呃服务端来去进行一个建立。然后我们要去建立的话，建立这个服务端的话，我们需要去呃就是绑定一个端口。呃这边没有去看那个。



![](img/d924d878fa9d64d263084d2110a72810_26.png)

身体。呃，像这边的话就是呃。

![](img/d924d878fa9d64d263084d2110a72810_28.png)

我用来作为1个FPS，就是进用这个FPS这一个服务端去呃配置的这样的一个配置文件。然后在这边的话，主要的话就是就这一个选项就是这一个ban port。翻或者的话就是表示我们这边啊执行之后的话。

他会在本地去监行这样子的1个7000的一个端口。我们可以来执行。C然后我们指定配置文件的话，用这样子杠C选项啊，然TS。呃，1。INN然后执行执行之后的话。

他就会在我们本地去经听这样子的1个TCP的1个700的一个端口。我们可以在另外一个终端。来查看一下它是否处于一个进行的一个状态。期间对吧它是一个精天的一个状态。

然后它它的一个使用的一个服务的话是这个FPS。

![](img/d924d878fa9d64d263084d2110a72810_30.png)

然后在这边的话，我们就建立了这样子的一个shops的一个服务端，就是这个FRP的一个服务端。建立好之后的话，我们需要去呃让客户端去进行一个连接。然后现在我们这边的话，在我们这边的话。

在我们这边的这一个场景的话，我嗯。

![](img/d924d878fa9d64d263084d2110a72810_32.png)

我这边我这边的话已经得到了他的这个呃。

![](img/d924d878fa9d64d263084d2110a72810_34.png)

外网的这一个外部服务的一个sha，对吧？然后我在这边我想要的话是把当前的这边的这一个呃需要的话，把它就是做一个代理。就把这边的这一个内网的这一个网段，把它代理到我的一个呃公网上面去，对吧？

那么我在这边的话，我就需要有1个FRPC的这样子的一个客户端。因为我需要在这边。

![](img/d924d878fa9d64d263084d2110a72810_36.png)

呃，在这边的这一个外b服务，外b的一个服务器上面，与我们的这边的这1个VPS上面的1个FIP的一个servver去建立一个临接。因为呃其实我们首先需要有这样子的一个连接。进行这样子的一个连接之后的话。

我们才能够有这样子的才能够去进行一个数据的一个传递，对吧？才能够去进行一个流量的一个转发。

![](img/d924d878fa9d64d263084d2110a72810_38.png)

好呃在这边的话。我们通过这样子的一个方法呃。

![](img/d924d878fa9d64d263084d2110a72810_40.png)

首先的话第一步的话我们需要去上传一个去上传一个我们的1个FRPC。上传到我们的一个这样这边要去就是代理的这样子的一个内网网段。然后呃我在这边的话是上传到这一个t杠FRP这样子一个目录。

因为呃我这边所要的一个文件的话比较多。

![](img/d924d878fa9d64d263084d2110a72810_42.png)

而且time目录下面的话就是。

![](img/d924d878fa9d64d263084d2110a72810_44.png)

它里面的一些文件名的话比较杂，对吧？像这样子的话就不是很好分辨。所以的话我这边单独进了一个文件夹，然后放到了这边。然后呃在这的话，我们只需要就是现在已经的话，我直接右键上传嘛，对吧？

把我这边的一个呃FIP给上传上去FIPC上传上去。上传上去之后的话，就到了这一个目录，对吧？然后的话我们还需要去进行一个配置，主要的话就是这边的一个配置文件。这边的一个配置文件的话。

我们要去进行一个缩始通道的话，呃，在FRP当中的话，它有提供了这样子的一个发表，也就是插件。呃，关于这边的话，大家可以去看，就是他的一个。



![](img/d924d878fa9d64d263084d2110a72810_46.png)

文档。

![](img/d924d878fa9d64d263084d2110a72810_48.png)

呃，在这边的话就是客户端的话，插件它有就是有提供了这样子的一个内置的插件。像比如说HTP的一个代理top5啊，还有呃这个我不知道。呃，一般的呃主要的话就是用它的一个说，还有的话HTP啊。

然后我们要去用它的这样子一个插件的话，我们的一个配置文件的一个写法也是比较简单的，只需要像这样子。就呃。在这边我直接在这边吧。就这一个只需要在这样子的一个文件当中去写这样子的一个内容。

首先的话就是呃这边的一个common common下面的话就是s的话就是指定我们的1个FRP就是我们的一个呃服务端所在的一个IP。然后的话或者的话就是他所监天的一个端口。其实这边的1个IP及端口的话。

就是我们这边对吧？我们在这边去今今今天的这样子的一个端口，就通过FRP建立了这样子一个服务端。然后这边的话是我这个VPS的1个IP以及呃这边今天的一个端口，对吧？当然的话端口这里的话，你可以改嘛。

改成你谁你你想要的这样子的一个端口都是可以的。然后下在的话，我这边的话是呃s5。就是呃表示我下面的这一个配置的话，就是呃来去建立这样子的一个说鼠的一个通道。首先第一个选项的话就是这一个type。

type的话就是指定我们这边的一个连接，或者是说呃我们的。这样子的一个呃数据的一个传递，它是用什么样子的一个协议啊？在这边的话，我们知道s的话，它的一个通道的一个呃数据传递的话是通过TCP的一个协议。

对吧？如果说你是HDP的话，那么或者说你你是呃你是要去做一个web的一个服务，对吧？你只是要去转转web的一个某一个端口。那么我们泰普这边的话就是指定我们的HTDP是。

因为它是通过HPPT的一个协议去进一个传去进行一个呃呃传递的访问的。然后下面的话就是ping plug的话就指定我们的一个插件。在这边的话指定你的一个s就是插件名。然后呃还有像在这边，像HDP的话。

就是HTP pro pro对吧？嗯，对。然后呃第三个的话就是这个remote port，remote port这个的话呃。这一个的话就是我们在这边呃在这边对吧？前面的这一个配置的话。

就是它会与我们这边的一个FPS去做一个连接，对吧？它会建行一个连接。它建立连接之后的话，它就会呃在我们remote port，也就是我们远程的这一个机器上面。

因为当前我们在这边的话是在这一个内网机器上面，对吧？然后我们在这边指定这个remote port的话，它就会在我们的一个FPS上面，也就是在我的一个VPS上面。

它会去精听一个这样子的一个1008的10088的这样子的一个端口。然后这个端口的话，就是我们通过这一个端口来去呃访问，或者是说把我们的一个流量，把它给转到我们这样子的一个呃的一个通道当中。

对吧就就像我们呃之前对吧，之前在去做这样子一个通道的时候，对吧？呃，就是在MSF当中，我们用那个收的一个代理模块，因为它是今天在我们本地嘛，对吧？然后我们再去做一个配置的时候的话。

他建立的那个收服务的话，就是它的一个我们需要通过他代理的那个端口，对吧？一般它是101080的那一个对吧？然后的话在指定那个呃MSF服务器。

或者说那个说代理服务器所呃建立的那一个主机的那个IP加它的一个代理的一个端口。我们就能够去代理我们想要的这样子的一个一个流量，对吧？好，呃。

在这边的话就是呃我们通过这样子的10088的这样子的一个端口来去呃代理我们想要的这样子的一个请求，或者是说流量。按我们的一个配置文件呃。同样的需要去写入到他写入到我们这边的这个内网机器上面去，对吧？

也就是在这边，然后我们。配置准备就去之之后的话，我们就只需要执行这样子的一条命令。呃，我当前的话是已经在了这样子的一个目录啊，就在这个目录对吧？然后呃大家要注意的话就是。呃。

你上传的这样子的一个这种可执行文件啊，要注意的话，你首先第一步你需要去给他一个执行权限，就是全mod加X。



![](img/d924d878fa9d64d263084d2110a72810_50.png)

加X，或者说你直接给777也是可以的。然后的话呃加你要去执行的这样子的一个可执行文件，对吧？我这边要去执行的话是这个FRBC。哦，呃我的一个配置文件话就在当前幕了。

所以的话我要去与我们的一个服务端去进行一个连接。我只需要去执行FRPC然后杠C。指定我的这边的一个配置文件FRP。呃RRPC战例。然后执行之后的话，我们再回回到我们这边的。EPS。嗯。



![](img/d924d878fa9d64d263084d2110a72810_52.png)

![](img/d924d878fa9d64d263084d2110a72810_53.png)

嗯。

![](img/d924d878fa9d64d263084d2110a72810_55.png)

7月。没是。嗯。这边怎么打不到啊？

![](img/d924d878fa9d64d263084d2110a72810_57.png)

嗯。

![](img/d924d878fa9d64d263084d2110a72810_59.png)

Yeah。

![](img/d924d878fa9d64d263084d2110a72810_61.png)

![](img/d924d878fa9d64d263084d2110a72810_62.png)

这怎么回事呢？

![](img/d924d878fa9d64d263084d2110a72810_64.png)

私いがし。前有有了这样子一个发PC啊，可的话我这边再去执行的话。

![](img/d924d878fa9d64d263084d2110a72810_66.png)

他没有起来。我这边再咨询一下。去。哦，是我这边的服务端的呀。

![](img/d924d878fa9d64d263084d2110a72810_68.png)

嗯。Yeah。

![](img/d924d878fa9d64d263084d2110a72810_70.png)

好。哦，可以了，刚刚的话是我这边我这边的这一个连接断掉了，刚刚直接这边的这个终端卡死了。然后这边等于等于的话这边他没有去今行这一个7这一个七清的这个端口没有再今听了。我这边执行的话。

他在这边跟这边没有去建行一个连接。然后现在的话就已经建立了这样子的一个连接了。然后我们其实从这边的话可以看到就是有有了一个new products这一个s5，就是已经建立成功了，对吧？scessful。

然后其实这边的一个s5的话，就是呃。

![](img/d924d878fa9d64d263084d2110a72810_72.png)

![](img/d924d878fa9d64d263084d2110a72810_73.png)

就其实就是我这边的这样子的一个配置文件，这边所标注的这一个。所以的话就是呃大家再去做这个。如果你的一个配置比较多，对吧？或者说你的每一个配置的话，它的一个作用的话不一样的话。

我们可以通过在这边去做这样的一个配置，能够在这边以及能自己的这样子一个配置文件能够去比较好的一个区分。



![](img/d924d878fa9d64d263084d2110a72810_75.png)

![](img/d924d878fa9d64d263084d2110a72810_76.png)

然后现在这边我们建立成功了对吧？建立成功之后的话，我们在我们的1个VPS上面去查看一下，去验证一下这边的一个代理通道，它是否建立成功了。怎么去验证呢？就我们前面有讲到，我们这边建立成功之后的话。

它会在我们的1个VPS上面去进去精听这样子的一个端口，对吧？这个10088的这样子的一个端口。那我们那么我们可以查看一下这个10088。



![](img/d924d878fa9d64d263084d2110a72810_78.png)

这个端口它是否是否处于一个今天的状态，对吧？现样的话是已经属于今天状态了。那么我们怎么去进行一个代理呢？我们同样的就比如说我们要去访问的话，是这个呃我们前面已经知道的对吧？



![](img/d924d878fa9d64d263084d2110a72810_80.png)

![](img/d924d878fa9d64d263084d2110a72810_81.png)

这个2。2这个机器。对吧我们现在这样子直接去访问，话，访问不到。然后我在这边的话，通过这样子的一个代理啊，这边的话是呃10088，对吧？



![](img/d924d878fa9d64d263084d2110a72810_83.png)

![](img/d924d878fa9d64d263084d2110a72810_84.png)

走走这一个带理。然后呃可以看到的话，现在的话就能够去进行了一个访问，对吧？然后其实这边的话就是说我们这边的一个代理化已经建立成功了。对吧然后我们在这边我们每请求一次的话，他都会有这样子的一个连接啊吧？



![](img/d924d878fa9d64d263084d2110a72810_86.png)

每次请求的话，他都会有相应的一个连接。

![](img/d924d878fa9d64d263084d2110a72810_88.png)

呃，不是，刚刚是卡了呀，这个拖ken的话就是呃拖肯的话。

![](img/d924d878fa9d64d263084d2110a72810_90.png)

呃，你可以设可以不设，就是你的一个token的话，你的一个就是呃在FPS上面。在FRP上面的那个配置，跟你的1个FRRPC的一个配置的话是要一样的。就是你的那个托ken。



![](img/d924d878fa9d64d263084d2110a72810_92.png)

嗯。

![](img/d924d878fa9d64d263084d2110a72810_94.png)

呃，这边的话就是建立了就通过这个FIRP建立了这样子的一个说死的一个代理通道，对吧？然后的话我们建立这一个代理通道的话，我们就同样的能够去进行相应的这样子的一些操作嘛，对吧？



![](img/d924d878fa9d64d263084d2110a72810_96.png)

![](img/d924d878fa9d64d263084d2110a72810_97.png)

![](img/d924d878fa9d64d263084d2110a72810_98.png)